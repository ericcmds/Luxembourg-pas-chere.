<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Luxembourg Pas Chère - Günstig Leben in Luxemburg</title>
    
    <!-- Performance Optimizations -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- Enhanced Meta Tags for SEO -->
    <meta name="description" content="Entdecken Sie Luxemburg ohne viel Geld auszugeben. Finden Sie günstige Restaurants, Unterhaltung, Shopping und mehr mit Luxembourg Pas Chère." />
    <meta name="keywords" content="luxemburg günstig, sparen in luxemburg, budget luxemburg, luxemburg pas chère, günstige restaurants luxemburg, günstiges shopping luxemburg, crowdfunding luxemburg, nachhaltiges leben luxemburg" />
    <meta name="author" content="Luxembourg Pas Chère" />
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <meta name="geo.region" content="LU" />
    <meta name="geo.country" content="Luxembourg" />
    <meta name="geo.placename" content="Luxembourg" />
    <meta name="language" content="DE" />
    <meta name="revisit-after" content="7 days" />
    <meta name="distribution" content="global" />
    <meta name="rating" content="general" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    
    <!-- Business Information for Local SEO -->
    <meta name="business:contact_data:locality" content="Luxembourg" />
    <meta name="business:contact_data:region" content="Luxembourg" />
    <meta name="business:contact_data:country_name" content="Luxembourg" />
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="Luxembourg Pas Chère - Günstig Leben in Luxemburg" />
    <meta property="og:description" content="Entdecken Sie Luxemburg ohne viel Geld auszugeben. Finden Sie günstige Restaurants, Unterhaltung, Shopping und mehr." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://luxembourgpaschère.com" />
    <meta property="og:image" content="https://luxembourgpaschère.com/og-image.jpg" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Luxembourg Pas Chère - Günstig Leben in Luxemburg" />
    <meta name="twitter:description" content="Entdecken Sie Luxemburg ohne viel Geld auszugeben. Finden Sie günstige Restaurants, Unterhaltung, Shopping und mehr." />
    <meta name="twitter:image" content="https://luxembourgpaschère.com/twitter-image.jpg" />
    
    <!-- Enhanced Structured Data for rich search results -->
    <script type="application/ld+json">
      [
        {
          "@context": "https://schema.org",
          "@type": "WebSite",
          "name": "Luxembourg Pas Chère",
          "alternateName": "Luxembourg Pas Cher",
          "url": "https://luxembourgpaschère.com",
          "description": "Entdecken Sie Luxemburg ohne viel Geld auszugeben",
          "inLanguage": ["de-DE", "fr-FR", "en-US"],
          "potentialAction": {
            "@type": "SearchAction",
            "target": "https://luxembourgpaschère.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
          },
          "publisher": {
            "@type": "Organization",
            "@id": "https://luxembourgpaschère.com/#organization"
          }
        },
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "@id": "https://luxembourgpaschère.com/#organization",
          "name": "Luxembourg Pas Chère",
          "url": "https://luxembourgpaschère.com",
          "logo": "https://luxembourgpaschère.com/images/logo.jpg",
          "description": "Ihr Experte für günstiges Leben in Luxemburg",
          "sameAs": [
            "https://www.instagram.com/luxembourgpaschere/",
            "https://www.facebook.com/luxembourgpaschere/",
            "https://www.linkedin.com/company/luxembourgpaschere/"
          ],
          "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer service",
            "email": "info@luxembourgpaschère.com",
            "availableLanguage": ["German", "French", "English"]
          }
        },
        {
          "@context": "https://schema.org",
          "@type": "Book",
          "name": "Luxembourg Pas Chère - Der ultimative Sparguide",
          "author": {
            "@type": "Organization",
            "name": "Luxembourg Pas Chère"
          },
          "publisher": {
            "@type": "Organization",
            "name": "Luxembourg Pas Chère"
          },
          "description": "Der komplette Leitfaden für ein günstiges Leben in Luxemburg mit exklusiven Tipps und Angeboten.",
          "inLanguage": ["de-DE", "fr-FR", "en-US"],
          "offers": {
            "@type": "Offer",
            "price": "19.99",
            "priceCurrency": "EUR",
            "availability": "https://schema.org/PreOrder",
            "validFrom": "2025-01-01"
          },
          "genre": "Lifestyle, Reiseführer, Ratgeber",
          "bookFormat": "https://schema.org/Paperback"
        }
      ]
    </script>
    
    <!-- Favicon & PWA Assets -->
    <link rel="icon" href="/src/assets/favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/src/assets/apple-touch-icon.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://luxembourgpaschère.com" />
    
    <!-- Critical CSS -->
    <style>
      /* Inline critical CSS for above-the-fold content */
      :root {
        --primary: #E31837;
        --secondary: #00A4E0;
        --dark: #333;
        --light: #f8f9fa;
      }
      body {
        margin: 0;
        font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }
    </style>
    
    <!-- Google Fonts - with display swap -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript>
      <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    </noscript>
    
    <!-- Bootstrap 5 CSS - deferred loading -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    </noscript>
    
    <!-- Font Awesome - deferred loading -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    <noscript>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    </noscript>
    
    <!-- Mobile Theme Color -->
    <meta name="theme-color" content="#E31837" />
    
    <!-- Accessibility improvements -->
    <script>
      // Skip navigation for keyboard users
      window.addEventListener('DOMContentLoaded', () => {
        const skipLink = document.createElement('a');
        skipLink.href = '#main';
        skipLink.className = 'skip-to-content';
        skipLink.textContent = 'Zum Inhalt springen';
        document.body.insertBefore(skipLink, document.body.firstChild);
        
        // Add styles for the skip link
        const style = document.createElement('style');
        style.textContent = `
          .skip-to-content {
            position: absolute;
            top: -40px;
            left: 0;
            padding: 8px;
            background: var(--primary);
            color: white;
            z-index: 100;
            transition: top 0.3s;
          }
          .skip-to-content:focus {
            top: 0;
          }
        `;
        document.head.appendChild(style);
      });
    </script>
  </head>
  <body>
    <div id="root" role="main"></div>
    
    <!-- Performance Monitoring -->
    <script>
      // Performance monitoring
      window.perfMetrics = {};
      window.perfMetrics.onFirstContentfulPaint = new Promise((resolve) => {
        // Track FCP
        new PerformanceObserver((entryList) => {
          const entries = entryList.getEntries() || [];
          entries.forEach((entry) => {
            if (entry.name === 'first-contentful-paint') {
              console.log(`First Contentful Paint: ${entry.startTime}ms`);
              resolve(entry.startTime);
            }
          });
        }).observe({ type: 'paint', buffered: true });

        // Fallback if FCP doesn't fire
        setTimeout(() => resolve(performance.now()), 5000);
      });
      
      // Track and log Largest Contentful Paint
      new PerformanceObserver((entryList) => {
        const entries = entryList.getEntries() || [];
        entries.forEach((entry) => {
          console.log(`Largest Contentful Paint: ${entry.startTime}ms`);
        });
      }).observe({ type: 'largest-contentful-paint', buffered: true });
      
      // Monitor for long tasks that might cause jank
      new PerformanceObserver((entryList) => {
        const entries = entryList.getEntries() || [];
        entries.forEach((entry) => {
          console.warn(`Long task detected: ${entry.duration}ms`);
        });
      }).observe({ type: 'longtask', buffered: true });
    </script>
    
    <!-- Bootstrap 5 Bundle with Popper - loaded with defer -->
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Vite Host Check Bypass - optimized script -->
    <script>
      // Timeout-Werte erhöhen
      window.__vite_plugin_react_timeout = 180000;
      window.__vite_plugin_react_preamble_installed__ = true;
      
      // Host-Beschränkungen entfernen
      window.VITE_ALLOW_ALL_HOSTS = true;
      window.VITE_DISABLE_HOST_CHECK = true;
      window.VITE_HOST_CHECK = false;
      window.VITE_ALLOWED_HOSTS = '*';
      
      // Optimized fetch interceptor
      const originalFetch = window.fetch;
      window.fetch = function(input, init) {
        if (typeof input === 'string' && input.includes('/@vite/')) {
          const url = new URL(input, window.location.href);
          url.searchParams.set('t', Date.now());
          return originalFetch(url.toString(), init);
        }
        return originalFetch(input, init);
      };
      
      // WebSocket-Verbindung verstärken
      window.addEventListener('beforeunload', () => {
        try {
          localStorage.setItem('vite-host-check-bypass', 'true');
        } catch (e) { /* Silent fail */ }
      });
      
      // Lokalen Storage aktualisieren, wenn möglich
      try {
        localStorage.setItem('vite:allow-host-check', 'false');
        localStorage.setItem('vite:allowed-hosts', '*');
      } catch (e) { /* Silent fail */ }
    </script>

    <!-- Progressive Web App setup -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Service Worker registration with error handling and offline support
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', async function() {
            try {
              const registration = await navigator.serviceWorker.register('/service-worker.js', {
                scope: '/'
              });
              
              // Handle service worker updates
              registration.addEventListener('updatefound', () => {
                const newWorker = registration.installing;
                newWorker.addEventListener('statechange', () => {
                  if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                    // New content is available, show update notification
                    const updateNotification = document.createElement('div');
                    updateNotification.className = 'update-notification';
                    updateNotification.innerHTML = `
                      <div class="update-message">
                        <p>Eine neue Version ist verfügbar!</p>
                        <button id="update-app">Aktualisieren</button>
                      </div>
                    `;
                    document.body.appendChild(updateNotification);
                    
                    // Add styles for the notification
                    const style = document.createElement('style');
                    style.textContent = `
                      .update-notification {
                        position: fixed;
                        bottom: 20px;
                        right: 20px;
                        background: var(--primary);
                        color: white;
                        padding: 12px 16px;
                        border-radius: 8px;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                        z-index: 9999;
                        animation: slideIn 0.3s ease;
                      }
                      @keyframes slideIn {
                        from { transform: translateY(100px); opacity: 0; }
                        to { transform: translateY(0); opacity: 1; }
                      }
                      .update-message {
                        display: flex;
                        align-items: center;
                        gap: 12px;
                      }
                      .update-message p {
                        margin: 0;
                      }
                      #update-app {
                        background: white;
                        color: var(--primary);
                        border: none;
                        padding: 6px 12px;
                        border-radius: 4px;
                        cursor: pointer;
                        font-weight: 600;
                      }
                    `;
                    document.head.appendChild(style);
                    
                    // Add update button functionality
                    document.getElementById('update-app').addEventListener('click', () => {
                      window.location.reload();
                    });
                  }
                });
              });
              
              console.log('ServiceWorker registered successfully');
              
              // Check for offline/online status
              window.addEventListener('online', () => {
                document.body.classList.remove('offline-mode');
                console.log('Application is back online');
              });
              
              window.addEventListener('offline', () => {
                document.body.classList.add('offline-mode');
                console.log('Application is offline');
              });
              
              // Initial check
              if (!navigator.onLine) {
                document.body.classList.add('offline-mode');
                console.log('Application is offline');
              }
              
            } catch (error) {
              console.error('ServiceWorker registration failed:', error);
            }
          });
        }
      });
    </script>

    <!-- Main script -->
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
